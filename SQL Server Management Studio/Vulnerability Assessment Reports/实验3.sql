--***************************************
--                  实验三
--***************************************

--把全部红色零件的颜色改成蓝色
USE SPJ
GO
update P
set COLOR='蓝'
where COLOR='红'

--由S5供给J4的零件P6改为由S3供应，请作必要的修改
update SPJ
set SNO='3'
where SNO='5' and PNO='6' and JNO='4'

--从供应商关系中删除S2的记录，并从供应情况关系中删除相应的记录
delete
from S
where SNO='2'
delete
from SPJ
where SNO='2'

--请将 (2, 6, 4, 200) 插入供应情况关系
insert 
into SPJ(SNO,PNO,JNO,QTY)
values(2,6,4,200)

--建立视图
CREATE VIEW SPJ_View
AS 
SELECT SNO,PNO,QTY
FROM J,SPJ
WHERE JNAME='三建' and SPJ.JNO=J.JNO

--各种零件代码及其数量
select PNO,sum(QTY) as number
from SPJ_View
group by PNO

--供应商1的供应情况
select distinct*
from SPJ_View
where SNO='1'

--自行设计一种需求，完成一个涉及到三个表的视图定义与查询操作
--1、建立供给螺栓的工程项目名
create view V_SPJ
as 
select JNAME ,CITY
from J
where JNO in(
select distinct JNO
from P,SPJ
where PNAME='螺栓' and P.PNO=SPJ.PNO
)
---删除视图
DROP VIEW V_SPJ;
--查询工程项目所在地
select CITY 
from V_SPJ
